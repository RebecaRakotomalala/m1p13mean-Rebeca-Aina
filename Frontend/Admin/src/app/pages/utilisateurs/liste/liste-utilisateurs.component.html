<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <app-card>
        <div class="card-header">
          <h4>Gestion des Utilisateurs</h4>
        </div>
        <div class="card-body">
          <!-- Filtres -->
          <div class="row mb-3">
            <div class="col-md-3">
              <label class="form-label">Rôle</label>
              <select class="form-select" [(ngModel)]="filtres.role" name="role">
                <option value="">Tous</option>
                <option value="admin">Admin</option>
                <option value="boutique">Boutique</option>
                <option value="client">Client</option>
              </select>
            </div>
            <div class="col-md-3">
              <label class="form-label">Statut</label>
              <select class="form-select" [(ngModel)]="filtres.statut" name="statut">
                <option value="">Tous</option>
                <option value="actif">Actif</option>
                <option value="suspendu">Suspendu</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Recherche</label>
              <input type="text" class="form-control" placeholder="Nom, email, téléphone..." [(ngModel)]="filtres.recherche" name="recherche">
            </div>
            <div class="col-md-2 d-flex align-items-end">
              <button class="btn btn-primary w-100" (click)="filtrer()">Filtrer</button>
            </div>
          </div>

          <!-- Tableau -->
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Email</th>
                  <th>Téléphone</th>
                  <th>Rôle</th>
                  <th>Statut</th>
                  <th>Date création</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let user of utilisateurs">
                  <td>{{ user.nom }} {{ user.prenom }}</td>
                  <td>{{ user.email }}</td>
                  <td>{{ user.telephone }}</td>
                  <td><span class="badge bg-primary">{{ user.role }}</span></td>
                  <td><span class="badge" [class.bg-success]="user.actif" [class.bg-danger]="!user.actif">
                    {{ user.actif ? 'Actif' : 'Suspendu' }}
                  </span></td>
                  <td>{{ user.date_creation | date:'short' }}</td>
                  <td>
                    <button class="btn btn-sm btn-info me-1" [routerLink]="['/utilisateurs', user._id]">Voir</button>
                    <button class="btn btn-sm btn-warning me-1" (click)="suspendre(user._id)">Suspendre</button>
                    <button class="btn btn-sm btn-danger" (click)="supprimer(user._id)">Supprimer</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </app-card>
    </div>
  </div>
</div>
