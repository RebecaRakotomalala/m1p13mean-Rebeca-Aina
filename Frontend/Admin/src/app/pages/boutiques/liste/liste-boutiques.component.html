<div class="container-fluid">
  <div class="row">
    <div class="col-12">
      <app-card>
        <div class="card-header">
          <h4>Gestion des Boutiques</h4>
        </div>
        <div class="card-body">
          <!-- Filtres -->
          <div class="row mb-3">
            <div class="col-md-2">
              <label class="form-label">Statut</label>
              <select class="form-select" [(ngModel)]="filtres.statut">
                <option value="">Tous</option>
                <option value="en_attente">En attente</option>
                <option value="validee">Validée</option>
                <option value="active">Active</option>
                <option value="suspendue">Suspendue</option>
                <option value="fermee">Fermée</option>
              </select>
            </div>
            <div class="col-md-2">
              <label class="form-label">Catégorie</label>
              <select class="form-select" [(ngModel)]="filtres.categorie">
                <option value="">Toutes</option>
                <option value="mode">Mode</option>
                <option value="alimentaire">Alimentaire</option>
                <option value="electronique">Électronique</option>
              </select>
            </div>
            <div class="col-md-2">
              <label class="form-label">Plan</label>
              <select class="form-select" [(ngModel)]="filtres.plan">
                <option value="">Tous</option>
                <option value="basique">Basique</option>
                <option value="premium">Premium</option>
                <option value="vip">VIP</option>
              </select>
            </div>
            <div class="col-md-4">
              <label class="form-label">Recherche</label>
              <input type="text" class="form-control" placeholder="Nom de la boutique..." [(ngModel)]="filtres.recherche">
            </div>
            <div class="col-md-2 d-flex align-items-end">
              <button class="btn btn-primary w-100" (click)="filtrer()">Filtrer</button>
            </div>
          </div>

          <!-- Tableau -->
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Nom</th>
                  <th>Catégorie</th>
                  <th>Statut</th>
                  <th>Plan</th>
                  <th>Note</th>
                  <th>Date création</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let boutique of boutiques">
                  <td>{{ boutique.nom }}</td>
                  <td><span class="badge bg-info">{{ boutique.categorie_principale }}</span></td>
                  <td>
                    <span class="badge" 
                      [class.bg-warning]="boutique.statut === 'en_attente'"
                      [class.bg-success]="boutique.statut === 'active'"
                      [class.bg-danger]="boutique.statut === 'suspendue'">
                      {{ boutique.statut }}
                    </span>
                  </td>
                  <td><span class="badge bg-secondary">{{ boutique.plan }}</span></td>
                  <td>{{ boutique.note_moyenne }}/5</td>
                  <td>{{ boutique.date_creation | date:'short' }}</td>
                  <td>
                    <button class="btn btn-sm btn-info me-1" [routerLink]="['/boutiques', boutique._id]">Voir</button>
                    <button *ngIf="boutique.statut === 'en_attente'" class="btn btn-sm btn-success me-1" (click)="valider(boutique._id)">Valider</button>
                    <button *ngIf="boutique.statut === 'validee'" class="btn btn-sm btn-primary me-1" (click)="activer(boutique._id)">Activer</button>
                    <button class="btn btn-sm btn-warning me-1" (click)="suspendre(boutique._id)">Suspendre</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </app-card>
    </div>
  </div>
</div>
